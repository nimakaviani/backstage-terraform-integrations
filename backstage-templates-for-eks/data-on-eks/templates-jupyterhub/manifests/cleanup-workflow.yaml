apiVersion: argoproj.io/v1alpha1
kind: Workflow
metadata:
  name: cleanup-jupyterhub-on-eks-${{values.name}}
  namespace: ${{values.namespace}}
  labels:
    backstage-id: eks-cluster-${{values.name}}
    env: dev
  annotations:
    argocd.argoproj.io/hook: PostDelete
    argocd.argoproj.io/hook-delete-policy: HookSucceeded
spec:
  arguments:
    parameters:
      - name: backstage-entity-name
        value: eks-cluster-${{values.name}}
      - name: script-location
        value: ai-ml/jupyterhub
      - name: admin-role
        value: ${{values.adminRoleName}}
  workflowTemplateRef:
    name: terraform-data-on-eks-cleanup
    clusterScope: true